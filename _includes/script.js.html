
		<!-- begin script.js.html -->
		<script>
			{%- assign header_graphics = site.static_files | where: "header_graphic", true -%}
			{%- assign text_colour = page.text_colour | strip_newlines | strip -%}
			window.addEventListener("load", headered);
			{%- if page.header_location == "central" %}
			window.addEventListener("load", arrowed);
			window.addEventListener("scroll", unarrowed, {passive:true});
			{%- endif -%}
			{%- if page.layout == "cascade" %}
			window.addEventListener("DOMContentLoaded", (event) => {
				window.addEventListener("wheel", wheelredirected);
				window.addEventListener("touchstart", touchstarted);
				window.addEventListener("touchmove", touchredirected);
				window.addEventListener("touchend", (ev) => {
					ev.preventDefault();
				});
			});
			{%- endif %}
			function headered() {
				const header_container = document.getElementById("header_container");
				const header_graphic = document.getElementById("header_graphic");
				random_header_graphic_array = new Array(
					{%- for header_graphic in header_graphics %}
					"{{- site.baseurl -}}{{- header_graphic.path -}}"{%- unless forloop.last -%}, {%- endunless -%}
					{%- endfor %}
				);
				var header_graphic_number = random_header_graphic_array.length;
				x = (Math.floor(Math.random() * header_graphic_number));
				random_header_graphic = (random_header_graphic_array[x]);
				header_graphic.src = random_header_graphic;
					console.log("Headered " + random_header_graphic + " from a total number of " + header_graphic_number + " header graphics.");
				{%- unless text_colour == "#000" or text_colour == "#000000" or text_colour == "black" %}
				var extension = random_header_graphic.split(".").pop();
				if (extension == "svg") {
					SVGInject(header_graphic);
					console.log("SVG header injected.");
				} else {
					console.log("No SVG header detected. Injection has not occured.");
				}
				{%- else %}
					console.log("SVG header injection unnecessary.");
				{%- endunless %}
				setTimeout(() => { header_container.style.opacity = "1"; }, 250);
				{%- if page.header_location == "central" %}
				// https://stackoverflow.com/questions/16302483/event-to-detect-when-positionsticky-is-triggered
				const observer = new IntersectionObserver(
				([e]) => e.target.children[0].classList.toggle("--sticky_header", e.intersectionRatio < 1),
					{threshold: [1]}
				);
				observer.observe(header_container);
	       			{%- endif %}
			}
			function wheelredirected(event) {
				if (window.innerWidth < document.getElementById("cascade_wrapper").scrollWidth) {
					if (window.innerHeight + window.scrollY >= document.body.scrollHeight) {
						if (document.getElementById("cascade_wrapper").scrollLeft == 0) {
							window.scrollTo(0, document.body.scrollHeight);
							document.getElementById("cascade_wrapper").scrollLeft += 1;
						} else if (document.getElementById("cascade_wrapper").scrollLeft > 0) {
							event.preventDefault();
							document.getElementById("cascade_wrapper").scrollLeft += (event.deltaY + event.deltaX);
							console.log("Redirect");
						}
					} else {
						console.log("Don't redirect");
					}
				} else {
					console.log ("No need for redirect");
					window.removeEventListener("wheel", wheelredirected);
				}
			}
			var clientX;
			var clientY;
			function touchstarted(event) {
				console.log("Touch started");
				clientX = event.touches[0].clientX;
				clientY = event.touches[0].clientY;
			}
			function touchredirected(event) {
				console.log("Touch moved");
				var deltaX;
				var deltaY;
				deltaX = event.changedTouches[0].clientX - clientX;
				deltaY = event.changedTouches[0].clientY - clientY;
				if (window.innerWidth < document.getElementById("cascade_wrapper").scrollWidth) {
					if (window.innerHeight + window.scrollY >= document.body.scrollHeight) {
						if (document.getElementById("cascade_wrapper").scrollLeft == 0) {
							document.getElementById("cascade_wrapper").scrollLeft += 1;
						} else if (document.getElementById("cascade_wrapper").scrollLeft > 0) {
							event.preventDefault();
							document.body.style.overflow = "hidden";
							document.getElementById("cascade_wrapper").scrollLeft -= (deltaY + deltaX);
							console.log("Redirect");
						}
					} else {
						document.body.style.overflow = "auto";
						console.log("Don't redirect");
					}
				} else {
					console.log ("No need for redirect");
					window.removeEventListener("touchstart", touchstarted);
					window.removeEventListener("touchmove", touchredirected);
				}
			}
		</script>
		<!-- end script.js.html -->

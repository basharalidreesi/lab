<!-- begin load.html -->
<script>
	window.addEventListener("load", load);
	function load() {
		random_header_graphic_array = new Array(
			{% assign header_graphics = site.static_files | where: "header_graphic", true %}
			{% for header_graphic in header_graphics %}
				"{{ site.baseurl }}{{ header_graphic.path }}"{% unless forloop.last %}, {% endunless %}
			{% endfor %}
		);
		var header_graphic_number = random_header_graphic_array.length;
		x = (Math.floor(Math.random() * header_graphic_number));
		random_header_graphic = (random_header_graphic_array[x]);
		document.getElementById("header_graphic").src = random_header_graphic;
			console.log("[load.html] Loaded " + random_header_graphic + " from a total number of " + header_graphic_number + " header graphics.");
		document.getElementById("loader_wrapper").remove();
			console.log("[load.html] Loader removed.");
		document.getElementById("loader_wrapper_style").remove();
			console.log("[load.html] Loader style removed.");
		{% assign text_colour = page.text_colour | strip_newlines | strip %}
		{% unless text_colour == "#000" or text_colour == "#000000" or text_colour == "black" %}
			var extension = random_header_graphic.split(".").pop();
			if (extension == "svg") {
				SVGInject(document.getElementById("header_graphic"));
				console.log("[load.html] SVG header injected.");
			} else {
				console.log("[load.html] No SVG header detected. Injection has not occured.");
			}
		 {% else %}
			console.log("[load.html] SVG header injection unnecessary.");
		 {% endunless %}
	}
	{% if page.header_location == "central" %}
		// https://stackoverflow.com/questions/16302483/event-to-detect-when-positionsticky-is-triggered
		const header = document.getElementById("header_container");
		const observer = new IntersectionObserver( 
			([e]) => e.target.children[0].classList.toggle("header_container-header_wrapper_central_sticky", e.intersectionRatio < 1),
			{threshold: [1]}
		);
		observer.observe(header);
	{% endif %}
</script>
<!-- end load.html -->

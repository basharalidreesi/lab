{% assign tree = page.path | remove: ".md" | remove: ".markdown" | remove: ".html" | split: "/" %}
	<script>console.log("Tree: {{ tree | join: ' ‚ü∂ ' }}");</script>
	{% for branch in tree %}
		{% assign segment = page.path | split: branch %}
		{% assign current = branch | prepend: segment[0] | append: ".markdown" %}
		<script>console.log("Branch {{ forloop.index }}: {{ current }}");</script>
		{% for node in site.documents %}
			{% if forloop.index == 1 %}
				{% assign no_underscore_current = current | remove_first: "_" %}
				{% assign no_underscore_node = node | remove_first: "_" %}
				{% if no_underscore_node.path == no_underscore_current %}
					<script>console.log("Title: {{ no_underscore_node.title }}");</script>
				{% endif %}
			{% else %}
				{% if node.path == current %}
					<script>console.log("Title: {{ node.title }}");</script>
				{% endif %}
			{% endif %}
		{% endfor %}
	{% endfor %}
{% assign tree_size = tree | size %}
	<script>console.log("Tree size: {{ tree_size }}");</script>

{% if tree_size == 1 %}
	<p>{{ page.title }}</p>
{% elsif tree_size == 2 %}
	<p>{{ page.title }} but wait there's more </p>
{% endif %}

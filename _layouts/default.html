<!-- introduction -->
<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>{{ site.title }} | {{ page.title }}</title>
		<meta name="description" content="{{ site.description }}">
		<meta name="author" content="{{ site.author }}">
		<!-- <link rel="shortcut icon" type="image/jpg" href=""/> -->
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" type="text/css" href="/assets/css/style.css" media="screen"/>
		<style>
			:root {
				--primary_colour: {{ page.primary_colour }};
				--secondary_colour: {{ page.secondary_colour }};
				--border_colour: {{ page.border_colour }};
				--text_colour: {{ page.text_colour }};
			}
		</style>
		<script>
			// https://css-tricks.com/the-trick-to-viewport-units-on-mobile/
			let vh = window.innerHeight * 0.01;
			document.documentElement.style.setProperty('--vh', `${vh}px`);
			// https://www.sitepoint.com/community/t/random-image-with-css/1785/9
			// https://www.tutorialspoint.com/javascript/array_length.htm
			if (document.getElementById) {
				window.onload = swap;
			};
			function swap() {
				random_header_graphic_array = new Array(
					{% assign image_files = site.static_files | where: "header_graphic", true %}
					{% for myimage in image_files %}
						"{{ myimage.path }}"{% if forloop.last %}{% else %}, {% endif %}
					{% endfor %}
				);
				var header_graphic_number = random_header_graphic_array.length;
				x = (Math.floor(Math.random() * header_graphic_number));
				random_header_graphic = (random_header_graphic_array[x]);
				document.getElementById("header_graphic").src = random_header_graphic;
				console.log("Successfully loaded " + random_header_graphic + " from a total number of " + header_graphic_number + " header graphics.");
				// {% if page.text_colour != "#000" %}
				//	// https://stackoverflow.com/questions/190852/how-can-i-get-file-extensions-with-javascript
				//	extension = random_header_graphic.split(".").pop();
				//	if(extension == "svg") {
				//		document.getElementById("header_graphic").style.visibility = "hidden";
				//		document.getElementById("pseudo_header_graphic").style.backgroundColor = "{{ page.text_colour }}";
				//		document.getElementById("pseudo_header_graphic").style.mask = "url("+ random_header_graphic +") no-repeat center";
				//		document.getElementById("pseudo_header_graphic").style.webkitMask = "url("+ random_header_graphic +") no-repeat center";
				//		document.getElementById("pseudo_header_graphic").style.maskSize = "cover";
				//		document.getElementById("pseudo_header_graphic").style.webkitMaskSize = "cover";
				//	}
				// {% endif %}
			}
			function lock_scroll() {
				window.scrollTo(0, 0);
				document.body.classList.toggle("--lock_scroll");
			}
		</script>
	</head>
	<body>
		<div class="mother_container {% if page.is_fullscreen == true %}--mother_container_fullscreen{% endif %}">
			<nav class="mother_container-navigation_container{% if page.header_location == "central" %}_central{% endif %}{% if page.header_location == "upper" %}_upper{% endif %}" id="navigation_container">
				<input type="checkbox" id="navigation_checkbox">
				<label for="navigation_checkbox" class="navigation_container_upper-navigation_checkbox_toggle" onClick="lock_scroll();">
					<p class="--navigation_text_styling">Menu</p>
				</label>
				<ul class="navigation_container-navigation_list_wrapper">
					{% assign sorted = site.pages | sort: "position" %}
					{% for item in sorted %}
						{% if item.is_listed == true %}
							<li class="navigation_list_wrapper-navigation_list_item --navigation_text_styling {% if item.url == page.url %}--active_navigation_text_styling{% endif %}">
								<a class="--anchor_styling" href="{{ item.url }}">
									{{ item.title }}
								</a>
							</li>
						{% endif %}
					{% endfor %}
				</ul>
			</nav>
			<header class="mother_container-header_container{% if page.header_location == "central" %}_central{% endif %}{% if page.header_location == "upper" %}_upper{% endif %}" id="header_container">
				<div class="header_container-header_wrapper{% if page.header_location == "central" %}_central{% endif %}{% if page.header_location == "upper" %}_upper{% endif %}">
					<a class="header_anchor_wrapper-header_anchor" href="{{ site.url }}">
						<img class="header_anchor-header_graphic" id="header_graphic" alt="Header">
					</a>
				</div>
				{% if page.header_location == "central" %}
					<script>
						// https://stackoverflow.com/questions/16302483/event-to-detect-when-positionsticky-is-triggered
						const header = document.getElementById('header_container');
						const observer = new IntersectionObserver( 
							([e]) => e.target.children[0].classList.toggle('header_container-header_wrapper_central_sticky', e.intersectionRatio < 1),
							{threshold: [1]}
						);
						observer.observe(header);
					</script>
				{% endif %}
			</header>
			<main class="mother_container-content_container" id="content_container">
				{{ content }}
			</main>
			{% if page.is_fullscreen == false %}
				<footer class="mother_container-footer_container">
					<div class="footer_container-footer_wrapper">
						{% include footer.html %}
					</div>
				</footer>
			{% endif %}
		</div>
	</body>
</html>

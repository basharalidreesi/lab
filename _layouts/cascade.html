---
layout: default
---

<!-- begin cascade.html -->
					{%- comment -%}
						<!-- begin cascade setup -->
					{%- endcomment -%}
						{%- capture page_content -%}
							{{ content }}
						{%- endcapture -%}
						{%- assign separator = "<!-- break -->" -%}
						{%- assign processed_separator = "!<!-!-! !break! !-!-!>!" -%}
						{%- assign blocks = page_content | split: separator -%}
						{%- capture processed_blocks -%}
							{%- for block in blocks -%}
								{%- assign index = forloop.index0 -%}
								{%- if block contains "</p>" -%}
									{%- if block contains "<img" -%} {%- comment -%} > {%- endcomment -%}
										{%- if block contains "</a>" -%}
											{%- assign tag = "img a" -%}
											{%- assign class = "img a" -%}
											{%- assign style = "img a" -%}
										{%- else -%}
											{%- assign tag = "img" -%}
											{%- assign class = "img" -%}
											{%- assign style = "img" -%}
										{%- endif -%}
									{%- else -%}
										{%- if block contains "</a>" -%}
											{%- assign tag = "p a" -%}
											{%- assign class = "p a" -%}
											{%- assign style = "p a" -%}
										{%- else -%}
											{%- assign tag = "p" -%}
											{%- assign class = "p" -%}
											{%- assign style = "p" -%}
										{%- endif -%}
									{%- endif -%}
								{%- elsif block contains "</iframe>" -%}
									{%- assign tag = "iframe" -%}
									{%- assign class = "iframe" -%}
									{%- assign style = "iframe" -%}
								{%- elsif block contains "</ul>" -%}
									{%- assign tag = "iframe" -%}
									{%- assign class = "iframe" -%}
									{%- assign style = "iframe" -%}
								{%- else -%}
									{%- assign tag = "undef" -%}
									{%- assign class = "undef" -%}
									{%- assign style = "none" -%}
								{%- endif -%}
								{%- if block contains "<!-- style:" -%} {%- comment -%} --> {%- endcomment -%}
									{%- assign style = "style" -%}
								{%- endif -%}
								<!-- BLOCK BREAK -->
								<!-- --> INDEX {{ index }} <!-- -->
								<!-- --> TAG {{ tag }} <!-- -->
								<!-- --> CLASS {{ class }} <!-- -->
								<!-- --> STYLE {{ style }} <!-- -->
							{%- endfor -%}
						{%- endcapture -%}
						{%- if page.['page title'].['is displayed'] -%}
							{%- assign preceded = true -%}
						{%- else -%}
							{%- assign preceded = false -%}
						{%- endif -%}
						{%- if page.['page footer'].['is displayed'] -%}
							{%- assign succeeded = true -%}
						{%- else -%}
							{%- assign succeeded = false -%}
						{%- endif -%}
						{%- if page.layout == "cascade" -%}
							{%- assign cascade = true -%}
						{%- else -%}
							{%- assign cascade = false -%}
						{%- endif -%}
						{%- assign block_content = processed_blocks | split: "<!-- BLOCK BREAK -->" -%}
					{%- comment -%}
						<!-- end cascade setup -->
					{%- endcomment %}
					<article class="main_container-article_wrapper" id="article_wrapper">
						{%- if preceded %}
						<header class="article_wrapper-article_header" {%- if page.['page title'].['styles'] %} style="{{- page.['page title'].['styles'] | strip -}}" {%- endif -%}>
							<h1 class="--article_header_styling">
								{{ page.title | replace: "&" , "and" }}
							</h1>
						</header>
						{%- endif -%}
						{%- for block in blocks -%}
							{%- assign count = forloop.index -%}
							{%- assign local = forloop.index0 | prepend: "<!-- --> INDEX " | append: " <!-- -->" -%}
							{%- for data in block_content -%}
								{%- if data contains local -%}
									{%- assign separated_data = data | remove: local | split: "<!-- -->" -%}
									{%- for datum in separated_data -%}
										{%- if datum contains "TAG" -%}
											{%- assign tag = datum | remove: "TAG" | strip -%}
										{%- endif -%}
										{%- if datum contains "CLASS" -%}
											{%- assign class = datum | remove: "CLASS" | strip -%}
										{%- endif -%}
										{%- if datum contains "STYLE" -%}
											{%- assign style = datum | remove: "STYLE" | strip -%}
										{%- endif -%}
									{%- endfor -%}
								{%- endif -%}
							{%- endfor %}
						<section class="{{ class }}" style="{{ style }}">
							<h2>Section {{ count }}</h2>
							{{ block |
								replace: "<", "!TAG!OPEN!" |
								replace: ">", "!TAG!CLOSE!" |
								strip_html |
								replace: "!TAG!OPEN!em!TAG!CLOSE!", "<em>" |
								replace: "!TAG!OPEN!/em!TAG!CLOSE!", "</em>" |
								replace: "!TAG!OPEN!p!TAG!CLOSE!", "<p>" |
								replace: "!TAG!OPEN!/p!TAG!CLOSE!", "</p>" |
								replace: "<p>!TAG!OPEN!img", "<img" |
								replace: "/!TAG!CLOSE!</p>", "/>" |
								remove: "<p></p>"
							}}
						</section>
						{%- endfor -%}
						{%- if cascade and succeeded %}
						<footer class="article_wrapper-article_footer" {%- if page.['page footer'].styles %} style="{{- page.['page footer'].styles | strip -}}" {%- endif -%}>
								{%- include footer.html %}					</footer>
						{%- endif %}
					</article>
					<!-- end cascade.html -->
